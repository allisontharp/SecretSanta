!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("rxjs")):"function"==typeof define&&define.amd?define("ngm-bootstrap-modal",["exports","@angular/core","@angular/common","rxjs"],t):t((e=e||self)["ngm-bootstrap-modal"]={},e.ng.core,e.ng.common,e.rxjs)}(this,(function(e,t,o,n){"use strict";var r=function(){function e(e,t){this.resolver=e,this.dialogService=t}return e.prototype.addComponent=function(e,o){var n=o||this.resolver.resolveComponentFactory(e),r=t.ReflectiveInjector.fromResolvedProviders([],this.element.injector),i=n.create(r);return this.element.insert(i.hostView),this.content=i.instance,this.content.wrapper=this,this.content},e.prototype.closeByClickOutside=function(){var e=this,t=this.container.nativeElement;t.querySelector(".modal-content").addEventListener("click",(function(e){e.stopPropagation()})),t.addEventListener("click",(function(){e.dialogService.removeDialog(e.content)}),!1)},e.decorators=[{type:t.Component,args:[{selector:"dialog-wrapper",template:'\n      <div #container class="modal fade" style="display:block !important;" role="dialog">\n          <ng-template #element></ng-template>\n      </div>\n  '}]}],e.ctorParameters=function(){return[{type:t.ComponentFactoryResolver},{type:s}]},e.propDecorators={element:[{type:t.ViewChild,args:["element",{static:!0,read:t.ViewContainerRef}]}],container:[{type:t.ViewChild,args:["container",{static:!0}]}]},e}();var i=function(){function e(e){this.resolver=e,this.dialogs=[]}return e.prototype.addDialog=function(e,t,o){var n=this;o=o||{};var i=this.resolver.resolveComponentFactory(r),a=this.element.createComponent(i,o.index).instance,s=a.addComponent(e,o.customFactory);return void 0!==o.index?this.dialogs.splice(o.index,0,s):this.dialogs.push(s),setTimeout((function(){a.container.nativeElement.classList.add("show"),a.container.nativeElement.classList.add("in")})),o.autoCloseTimeout&&setTimeout((function(){n.removeDialog(s)}),o.autoCloseTimeout),o.closeByClickingOutside&&a.closeByClickOutside(),o.backdropColor&&(a.container.nativeElement.style.backgroundColor=o.backdropColor),s.fillData(t)},e.prototype.removeDialog=function(e){var t=this,o=e.wrapper.container.nativeElement;o.classList.remove("show"),o.classList.remove("in"),setTimeout((function(){t._removeElement(e)}),300)},e.prototype._removeElement=function(e){var t=this.dialogs.indexOf(e);t>-1&&(this.element.remove(t),this.dialogs.splice(t,1))},e.prototype.clear=function(){this.element.clear(),this.dialogs=[]},e.decorators=[{type:t.Component,args:[{selector:"dialog-holder",template:"<ng-template #element></ng-template>"}]}],e.ctorParameters=function(){return[{type:t.ComponentFactoryResolver}]},e.propDecorators={element:[{type:t.ViewChild,args:["element",{static:!0,read:t.ViewContainerRef}]}]},e}();var a=function(){this.container=null};var s=function(){function e(e,t,o,n){this.resolver=e,this.applicationRef=t,this.injector=o,this.container=n&&n.container}return e.prototype.addDialog=function(e,t,o){return this.dialogHolderComponent||(this.dialogHolderComponent=this.createDialogHolder(o?o.customFactory:null)),this.dialogHolderComponent.addDialog(e,t,o)},e.prototype.removeDialog=function(e){this.dialogHolderComponent&&this.dialogHolderComponent.removeDialog(e)},e.prototype.removeAll=function(){this.dialogHolderComponent.clear(),setTimeout((function(){var e=document.querySelector("body");e&&e.classList&&e.classList.remove("modal-open")}),1)},e.prototype.createDialogHolder=function(e){var t=this,o=(e||this.resolver.resolveComponentFactory(i)).create(this.injector),n=o.hostView.rootNodes[0];if(!this.container){var r=this.applicationRef.components[0];this.container=r.hostView.rootNodes[0]}return this.applicationRef.attachView(o.hostView),o.onDestroy((function(){t.applicationRef.detachView(o.hostView)})),this.container.appendChild(n),o.instance},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:t.ComponentFactoryResolver},{type:t.ApplicationRef},{type:t.Injector},{type:a,decorators:[{type:t.Optional}]}]},e}();function c(e,t,o,n){return new s(e,t,o,n)}var l=function(){function e(){}return e.forRoot=function(o){return{ngModule:e,providers:[{provide:a,useValue:o},{provide:s,useFactory:c,deps:[t.ComponentFactoryResolver,t.ApplicationRef,t.Injector,a]}]}},e.decorators=[{type:t.NgModule,args:[{declarations:[i,r],providers:[s],imports:[o.CommonModule],entryComponents:[i,r]}]}],e}(),p=function(){function e(e){this.dialogService=e}return e.prototype.fillData=function(e){var t=this;e=e||{};for(var o=Object.keys(e),r=0,i=o.length;r<i;r++){var a=o[r];this[a]=e[a]}return n.Observable.create((function(e){return t.observer=e,function(){t.close()}}))},e.prototype.close=function(){this.dialogService.removeDialog(this)},e.prototype.ngOnDestroy=function(){this.observer&&this.observer.next(this.result)},e}();e.DialogComponent=p,e.DialogService=s,e.DialogServiceConfig=a,e.NgmBootstrapModalModule=l,e.ɵa=c,e.ɵb=i,e.ɵc=r,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngm-bootstrap-modal.umd.min.js.map